
{% extends 'base.html' %}

{% block content %}
<h1 class="text-center">Your Meal Plan</h1>
<div class=" detail text-center">You have {{meal_numbers["total_meals"]}} meals</div>

<div class="container">
<h4>{{meal_numbers["Breakfast"]}} Breakfasts</h4>
{% for i in range(meals|length) %}
    {% if meals[i].meals.type_ == "Breakfast" %}
    <div class="accordion" id="accordion">
        <div class="card">
          <div class="card-header" id="headingOne">
            <h2 class="mb-0">
              <button class="btn" type="button" data-toggle="collapse" data-target="#a{{meals[i].id}}" aria-expanded="true" aria-controls="collapseOne">
                {{meals[i].meals.title}}
              </button>
            </h2>
          </div>
          <div id="a{{meals[i].id}}" class="collapse" aria-labelledby="headingOne" data-parent="#accordion">
            <div class="card-body">
                <ul>
                    <h6>Ingredients</h6>
                    {% for ingredient in meals[i].meals.ingredients %}
                        <li>{{ingredient.name}}</li>
                    {% endfor %}
                </ul>
                <ul>
                    <h6>Nutrition Information</h6>
                    {% for key, val in nutrition_data[i].items() %}
                    <li>{{key}}: {{val}}g</li>
                    {% endfor %}
                </ul>
            </div>
          </div>
        </div>
    </div> 
    {% endif %}  
{% endfor %}
<h4>{{meal_numbers["Lunch"]}} Lunches</h4>
{% for i in range(meals|length) %}
    {% if meals[i].meals.type_ == "Lunch" %}
    <div class="accordion" id="accordion">
        <div class="card">
          <div class="card-header" id="headingOne">
            <h2 class="mb-0">
              <button class="btn" type="button" data-toggle="collapse" data-target="#a{{meals[i].id}}" aria-expanded="true" aria-controls="collapseOne">
                {{meals[i].meals.title}}
              </button>
            </h2>
          </div>
          <div id="a{{meals[i].id}}" class="collapse" aria-labelledby="headingOne" data-parent="#accordion">
            <div class="card-body">
                <ul>
                    <h6>Ingredients</h6>
                    {% for ingredient in meals[i].meals.ingredients %}
                        <li>{{ingredient.name}}</li>
                    {% endfor %}
                </ul>
                <ul>
                    <h6>Nutrition Information</h6>
                    {% for key, val in nutrition_data[i].items() %}
                    <li>{{key}}: {{val}}g</li>
                    {% endfor %}
                </ul>
            </div>
          </div>
        </div>
    </div> 
    {% endif %} 
{% endfor %}
<h4>{{meal_numbers["Dinner"]}} Dinners</h4>
{% for i in range(meals|length) %}
    {% if meals[i].meals.type_ == "Dinner" %}
    <div class="accordion" id="accordion">
        <div class="card">
          <div class="card-header" id="headingOne">
            <h2 class="mb-0">
              <button class="btn" type="button" data-toggle="collapse" data-target="#a{{meals[i].id}}" aria-expanded="true" aria-controls="collapseOne">
                {{meals[i].meals.title}}
              </button>
            </h2>
          </div>
          <div id="a{{meals[i].id}}" class="collapse" aria-labelledby="headingOne" data-parent="#accordion">
            <div class="card-body">
                <ul>
                    <h6>Ingredients</h6>
                    {% for ingredient in meals[i].meals.ingredients %}
                        <li>{{ingredient.name}}</li>
                    {% endfor %}
                </ul>
                <ul>
                    <h6>Nutrition Information</h6>
                    {% for key, val in nutrition_data[i].items() %}
                    <li>{{key}}: {{val}}g</li>
                    {% endfor %}
                </ul>
            </div>
          </div>
        </div>
    </div> 
    {% endif %} 
{% endfor %}
</div>
<div class="container my-3">
  <a href="{{url_for('show_packing_list', trip_id=meals[0].trip_id)}}" class="btn btn-success">Get printable packing list</a>
</div>
{% endblock %}